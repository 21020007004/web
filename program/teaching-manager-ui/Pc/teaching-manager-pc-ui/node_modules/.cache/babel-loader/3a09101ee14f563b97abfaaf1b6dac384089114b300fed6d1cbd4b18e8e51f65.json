{"ast":null,"code":"import { getCourseAppliactionById } from '@/api/course-application/course-application.js';\nimport { examineACourse } from '@/api/course-examination/course-examination.js';\nimport { getCourseById } from '@/api/course/course.js';\nexport default {\n  data() {\n    return {\n      dialogFormVisible: false,\n      //标题\n      title: '详情',\n      //申请的新的数据\n      newData: {},\n      //原来的数据\n      originalData: {}\n    };\n  },\n  props: {\n    //将课程申请的id传过来\n    courseApplicationId: {\n      type: String\n    },\n    //控制审批按钮是否显示\n    isShowButton: {\n      type: String\n    }\n  },\n  methods: {\n    async getCourseInfoById() {\n      const res = await getCourseById(this.newData.courseId);\n      if (res.data.code === 1) {\n        this.originalData = res.data.data;\n      }\n    },\n    async openDialog() {\n      //打开对话框，利用从父组件中传过来的id获取到相应的数据\n      const result = await getCourseAppliactionById(this.courseApplicationId);\n      this.newData = result.data.data;\n      const operationName = result.data.data.operationName;\n      console.log(this.isShowButton);\n      if (this.isShowButton === 'true') {\n        switch (operationName) {\n          case '新增':\n            this.title = '申请新增';\n            break;\n          case '修改':\n            this.title = '修改后的数据';\n            this.getCourseInfoById();\n            break;\n          case '删除':\n            this.title = '申请删除';\n            break;\n          default:\n            break;\n        }\n      }\n      this.dialogFormVisible = true;\n    },\n    //是否同意教师的申请\n    async agreeOrNot(name) {\n      this.newData.courseExaminationName = name;\n      await examineACourse(this.newData);\n      this.dialogFormVisible = false;\n      this.$emit('refresh'); //告知父组件更新页面\n      this.$message({\n        type: 'success',\n        message: '操作成功！'\n      });\n    }\n  }\n};","map":{"version":3,"names":["getCourseAppliactionById","examineACourse","getCourseById","data","dialogFormVisible","title","newData","originalData","props","courseApplicationId","type","String","isShowButton","methods","getCourseInfoById","res","courseId","code","openDialog","result","operationName","console","log","agreeOrNot","name","courseExaminationName","$emit","$message","message"],"sources":["src/components/CourseAppliactionItem.vue"],"sourcesContent":["<!-- 课程申请列表项 -->\r\n<template>\r\n    <div>\r\n        <div class=\"root\" @click=\"openDialog()\"> \r\n            <!-- 每一项 -->\r\n            <div style=\"margin-left: 20px;\">\r\n                <el-avatar src=\"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg\"></el-avatar>\r\n            </div>\r\n            <div style=\"margin-left: 10px;\">\r\n                <div  class=\"userName-font\">\r\n                    <slot name=\"userName\">用户名</slot>\r\n                </div>\r\n                <div class=\"application-font\">\r\n                    请求<slot name=\"operation\"></slot>一门课程 \"<slot name=\"course\">概率论</slot>\"\r\n                </div>\r\n            </div>  \r\n            <div class=\"right\">\r\n                <slot name = \"courseExaminationName\">\r\n                    <el-tag type=\"warning\" size=\"mini\" class=\"tag\">\r\n                        待审批\r\n                    </el-tag>\r\n                </slot>\r\n                <div class=\"date-font\">\r\n                <slot name=\"dateTime\">2023-01-05 12:12:25</slot>\r\n                </div>\r\n            </div>  \r\n        </div>\r\n\r\n        <!-- 对话框 -->\r\n        <el-dialog :visible.sync=\"dialogFormVisible\">\r\n            <el-descriptions :title=\"title\" :column=\"2\" border>\r\n                <el-descriptions-item label=\"课程名称\">{{ newData.courseName }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"教师\">{{ newData.teacherName }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"学分\">{{ newData.courseCredit }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"学时\">{{ newData.courseHour }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"上课时间\">{{ newData.courseTime }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"上课地点\">{{ newData.coursePlaceName }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"课程简介\">{{ newData.courseDescription }}</el-descriptions-item>\r\n            </el-descriptions>\r\n\r\n            <el-descriptions title=\"修改前的数据\" column=\"2\" border style=\"margin-top: 20px;\" v-if=\"newData.operationName === '修改'\">\r\n                <el-descriptions-item label=\"课程名称\">{{ originalData.name }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"教师\">{{ originalData.teacherName }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"学分\">{{ originalData.credit }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"学时\">{{ originalData.hour }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"上课时间\">{{ originalData.time }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"上课地点\">{{ originalData.placeName }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"课程简介\">{{ originalData.description }}</el-descriptions-item>\r\n            </el-descriptions>\r\n\r\n            <div slot=\"footer\" class=\"dialog-footer\" v-if=\"isShowButton === 'true'\">\r\n                <el-button @click=\"agreeOrNot('未通过')\">不通过</el-button>\r\n                <el-button type=\"primary\" @click=\"agreeOrNot('已通过')\">通 过</el-button>\r\n            </div>\r\n\r\n        </el-dialog>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getCourseAppliactionById } from '@/api/course-application/course-application.js'\r\nimport { examineACourse } from '@/api/course-examination/course-examination.js'\r\nimport { getCourseById } from '@/api/course/course.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            dialogFormVisible: false,\r\n            //标题\r\n            title: '详情',\r\n            //申请的新的数据\r\n            newData: {},\r\n            //原来的数据\r\n            originalData: {}\r\n        }\r\n    },\r\n    props: {\r\n        //将课程申请的id传过来\r\n        courseApplicationId: {\r\n            type: String\r\n        },\r\n        //控制审批按钮是否显示\r\n        isShowButton: {\r\n            type: String\r\n        }\r\n    },\r\n    methods: {\r\n        async getCourseInfoById() {\r\n            const res = await getCourseById(this.newData.courseId)\r\n            if (res.data.code === 1) {\r\n                this.originalData = res.data.data\r\n            }\r\n        },\r\n        async openDialog() {\r\n            //打开对话框，利用从父组件中传过来的id获取到相应的数据\r\n            const result = await getCourseAppliactionById(this.courseApplicationId)\r\n            this.newData = result.data.data\r\n            const operationName = result.data.data.operationName\r\n            console.log(this.isShowButton)\r\n            if (this.isShowButton === 'true') {\r\n                switch(operationName) {\r\n                    case '新增':\r\n                        this.title = '申请新增'\r\n                        break\r\n                    case '修改':\r\n                        this.title = '修改后的数据'\r\n                        this.getCourseInfoById()\r\n                        break\r\n                    case '删除':\r\n                        this.title = '申请删除'\r\n                        break\r\n                    default:\r\n                        break\r\n                }\r\n            }\r\n            this.dialogFormVisible = true\r\n        },\r\n        //是否同意教师的申请\r\n        async agreeOrNot(name) {\r\n            this.newData.courseExaminationName = name\r\n            await examineACourse(this.newData)\r\n            this.dialogFormVisible = false\r\n            this.$emit('refresh')//告知父组件更新页面\r\n            this.$message({\r\n                type: 'success',\r\n                message: '操作成功！'\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .root {\r\n        position: relative;\r\n        display: flex;\r\n        margin-bottom: 12px;\r\n        width: 100%;\r\n        height: 80px;\r\n        background-color: rgba(250, 249, 249, 0.978);\r\n        border-radius: 7px;\r\n        cursor: pointer;\r\n    }\r\n    .root > div {\r\n        align-self: center;\r\n    }\r\n    .userName-font {\r\n        font-size: small;\r\n        color: rgba(0, 0, 0, 0.695);\r\n        margin-bottom: 2%;\r\n    }\r\n    .application-font {\r\n        font-size: medium;\r\n        font-weight: 550;\r\n        color: rgba(0, 0, 0, 0.77);\r\n    }\r\n    .right {\r\n        position: absolute;\r\n        right: 20px;\r\n        text-align: right;\r\n        right: 26px;\r\n    }\r\n    .tag {\r\n        text-align: right;\r\n        margin-bottom: 26%;\r\n    }\r\n    .date-font {\r\n        font-size:x-small;\r\n        color: rgba(0, 0, 0, 0.626);\r\n    }\r\n</style>"],"mappings":"AA6DA,SAAAA,wBAAA;AACA,SAAAC,cAAA;AACA,SAAAC,aAAA;AACA;EACAC,KAAA;IACA;MACAC,iBAAA;MACA;MACAC,KAAA;MACA;MACAC,OAAA;MACA;MACAC,YAAA;IACA;EACA;EACAC,KAAA;IACA;IACAC,mBAAA;MACAC,IAAA,EAAAC;IACA;IACA;IACAC,YAAA;MACAF,IAAA,EAAAC;IACA;EACA;EACAE,OAAA;IACA,MAAAC,kBAAA;MACA,MAAAC,GAAA,SAAAb,aAAA,MAAAI,OAAA,CAAAU,QAAA;MACA,IAAAD,GAAA,CAAAZ,IAAA,CAAAc,IAAA;QACA,KAAAV,YAAA,GAAAQ,GAAA,CAAAZ,IAAA,CAAAA,IAAA;MACA;IACA;IACA,MAAAe,WAAA;MACA;MACA,MAAAC,MAAA,SAAAnB,wBAAA,MAAAS,mBAAA;MACA,KAAAH,OAAA,GAAAa,MAAA,CAAAhB,IAAA,CAAAA,IAAA;MACA,MAAAiB,aAAA,GAAAD,MAAA,CAAAhB,IAAA,CAAAA,IAAA,CAAAiB,aAAA;MACAC,OAAA,CAAAC,GAAA,MAAAV,YAAA;MACA,SAAAA,YAAA;QACA,QAAAQ,aAAA;UACA;YACA,KAAAf,KAAA;YACA;UACA;YACA,KAAAA,KAAA;YACA,KAAAS,iBAAA;YACA;UACA;YACA,KAAAT,KAAA;YACA;UACA;YACA;QACA;MACA;MACA,KAAAD,iBAAA;IACA;IACA;IACA,MAAAmB,WAAAC,IAAA;MACA,KAAAlB,OAAA,CAAAmB,qBAAA,GAAAD,IAAA;MACA,MAAAvB,cAAA,MAAAK,OAAA;MACA,KAAAF,iBAAA;MACA,KAAAsB,KAAA;MACA,KAAAC,QAAA;QACAjB,IAAA;QACAkB,OAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}