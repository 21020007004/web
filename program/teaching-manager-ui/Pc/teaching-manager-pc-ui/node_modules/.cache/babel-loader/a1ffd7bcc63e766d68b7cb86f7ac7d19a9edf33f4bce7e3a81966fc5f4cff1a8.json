{"ast":null,"code":"import { getUserInfo } from '@/utils/storage';\nimport { getCourseByCondition, studentSelectCourse\n// judgeCourseSelectedStatus\n// exitCourse\n} from '../../api/course/course.js';\nexport default {\n  data() {\n    return {\n      //查询参数\n      queryStudentParam: {\n        pageSize: 10,\n        //页面的大小，默认为10\n        currentPage: 1,\n        //现在所处第几页\n        param: {\n          name: '',\n          //课程名称\n          teacherName: '',\n          //教师名称\n          courseStatusId: '2' //课程状态\n        }\n      },\n\n      total: -1,\n      //合计数据    \n      tableData: [],\n      //表格数据 \n      dialogFormVisible: false,\n      //控制是否显示详情\n      detailCourseData: {},\n      //详情\n      //表单信息\n      form: {\n        courseId: '',\n        studentId: ''\n      }\n    };\n  },\n  created() {\n    const userInfo = getUserInfo();\n    this.form.studentId = userInfo.id;\n    this.getInfo();\n  },\n  methods: {\n    //向后台获取信息\n    async getInfo() {\n      const result = await getCourseByCondition(this.queryStudentParam);\n      this.tableData = result.data.data;\n      this.total = result.data.total;\n    },\n    //处理页面大小的改变\n    handleSizeChange(e) {\n      this.queryStudentParam.pageSize = e;\n      this.getInfo();\n    },\n    //处理当前页数的改变\n    handleCurrentChange(e) {\n      console.log(e);\n      this.queryStudentParam.currentPage = e;\n      this.getInfo();\n    },\n    //详情表单\n    openCourseDetail(row) {\n      this.detailCourseData = row;\n      this.dialogFormVisible = true;\n    },\n    //选课\n    selectTheCourse(row) {\n      // console.log(row)\n      this.$confirm('您确定选择这门课程吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        this.form.courseId = row.courseId;\n        const result = await studentSelectCourse(this.form);\n        if (result.data.code === 1) {\n          this.$message({\n            type: 'success',\n            message: '选课成功！'\n          });\n        } else {\n          this.$message({\n            type: 'warning',\n            message: '您已经选择了该课程，可前往我的课程查看'\n          });\n        }\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消选课'\n        });\n      });\n    }\n\n    //退课\n    // async exitTheCourse(row) {\n    //     //判断是否选了这门课\n    //     if (this.judgeCourseSelectedStatus(row.courseId) == false) {\n    //         this.$message({\n    //             type: \"warning\",\n    //             message: \"您还未选择该门课程哦~\"\n    //         })\n    //     }\n    //     //提示\n    //     else {\n    //         this.$confirm('您确定退选这门课程吗？', '提示', {\n    //             confirmButtonText: '确定',\n    //             cancelButtonText: '取消',\n    //             type: 'warning'\n    //         }).then(async () => {   \n    //             this.form.courseId = row.courseId\n    //             const reuslt = await exitCourse(this.form)\n    //             if (reuslt.data.code === 1) {\n    //                 this.$message({\n    //                         type: 'success',\n    //                         message: '退课成功！'\n    //                 })\n    //             }\n    //         }).catch(() => {\n    //             this.$message({\n    //                 type: 'info',\n    //                 message: '已取消退课'\n    //             })   \n    //         })\n    //     }\n    // },\n\n    // //判断是否需要退课\n    // async judgeCourseSelectedStatus(couseId) {\n    //     let form = {\n    //         couseId,\n    //         studentId: '24'\n    //     }\n    //     const result = await judgeCourseSelectedStatus(form)\n    //     console.log(result)\n    //     return result.data.code == 1\n    // }\n  }\n};","map":{"version":3,"names":["getUserInfo","getCourseByCondition","studentSelectCourse","data","queryStudentParam","pageSize","currentPage","param","name","teacherName","courseStatusId","total","tableData","dialogFormVisible","detailCourseData","form","courseId","studentId","created","userInfo","id","getInfo","methods","result","handleSizeChange","e","handleCurrentChange","console","log","openCourseDetail","row","selectTheCourse","$confirm","confirmButtonText","cancelButtonText","type","then","code","$message","message","catch"],"sources":["src/views/course/SelectCourseCenter.vue"],"sourcesContent":["<template>\r\n    <div class=\"root\">\r\n  \r\n      <!-- 搜素栏 -->\r\n      <el-row  :gutter=\"20\">\r\n        <el-col :span=\"8\">\r\n          <div>\r\n            <span style=\"vertical-align: middle;\">课程名称：</span>\r\n            <el-input\r\n              placeholder=\"请输入课程名称\"\r\n              style=\"display: inline-block; width: 60%; vertical-align: middle;\"\r\n              size=\"small\"\r\n              v-model=\"queryStudentParam.param.name\"\r\n              >\r\n            </el-input>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <div>\r\n            <span style=\"vertical-align: middle;\">教师：</span>\r\n            <el-input\r\n              placeholder=\"请输入教师姓名\"\r\n              style=\"display: inline-block; width: 60%; vertical-align: middle;\"\r\n              size=\"small\"\r\n              v-model=\"queryStudentParam.param.teacherName\"\r\n              >\r\n            </el-input>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <div>\r\n            <el-button type=\"primary\" size=\"small\" @click=\"getInfo\" style=\"width: 30%;\">查 询</el-button>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n  \r\n      <!-- 数据表格 -->\r\n      <el-table\r\n        :data=\"tableData\"\r\n        border\r\n        style=\"width: 100%\"\r\n        height=\"70vh\"\r\n        >\r\n            <el-table-column\r\n                prop=\"name\"\r\n                label=\"课程名称\"\r\n                width=\"150%\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"teacherName\"\r\n                label=\"教师\"\r\n                width=\"150%\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"credit\"\r\n                label=\"学分\"\r\n                width=\"150%\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"hour\"\r\n                label=\"学时\"\r\n                width=\"150%\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"time\"\r\n                label=\"上课时间\"\r\n                width=\"150%\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"placeName\"\r\n                label=\"上课地点\"\r\n                width=\"170%\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                fixed=\"right\"\r\n                label=\"操作\"\r\n                width=\"200%\">\r\n                <template slot-scope=\"scope\"\r\n                >\r\n                <el-button\r\n                    size=\"mini\"\r\n                    type=\"primary\"\r\n                    plain @click=\"openCourseDetail(scope.row)\">详情</el-button>\r\n\r\n                <el-button\r\n                    size=\"mini\"\r\n                    @click=\"selectTheCourse(scope.row)\"\r\n                    type=\"primary\"\r\n                    >选课</el-button>\r\n\r\n                <!-- <el-button\r\n                    size=\"mini\"\r\n                    @click=\"exitTheCourse(scope.row)\"\r\n                    type=\"warning\"\r\n                   >退课</el-button> -->\r\n\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n  \r\n        <!-- 详情表单 -->\r\n        <el-dialog :visible.sync=\"dialogFormVisible\">\r\n            <el-descriptions title=\"详情\" :column=\"2\" border>\r\n                <el-descriptions-item label=\"课程名称\">{{ detailCourseData.name }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"教师\">{{ detailCourseData.teacherName }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"学分\">{{ detailCourseData.credit }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"学时\">{{ detailCourseData.hour }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"上课时间\">{{ detailCourseData.time }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"上课地点\">{{ detailCourseData.placeName }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"课程简介\">{{ detailCourseData.description }}</el-descriptions-item>\r\n            </el-descriptions>\r\n        </el-dialog>\r\n\r\n\r\n\r\n      <!-- 分页 -->\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryStudentParam.currentPage\"\r\n        :page-sizes=\"[5,10, 15, 20, 25]\"\r\n        :page-size=\"queryStudentParam.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        style=\"margin-top: 14px;\">\r\n      </el-pagination>\r\n  \r\n    </div>\r\n  </template>\r\n    \r\n  <script>\r\n    import { getUserInfo } from '@/utils/storage'\r\n    import { \r\n        getCourseByCondition,\r\n        studentSelectCourse\r\n        // judgeCourseSelectedStatus\r\n        // exitCourse\r\n    } from '../../api/course/course.js'\r\n    export default {\r\n      data() {\r\n        return {\r\n            //查询参数\r\n            queryStudentParam: {\r\n                pageSize: 10,                   //页面的大小，默认为10\r\n                currentPage: 1,                 //现在所处第几页\r\n                param: {\r\n                    name: '',                   //课程名称\r\n                    teacherName: '',            //教师名称\r\n                    courseStatusId: '2'         //课程状态\r\n                }\r\n            },\r\n            total: -1,                          //合计数据    \r\n            tableData: [],                      //表格数据 \r\n            dialogFormVisible: false,           //控制是否显示详情\r\n            detailCourseData: {},               //详情\r\n            //表单信息\r\n            form: {\r\n                courseId: '',\r\n                studentId: ''\r\n            }\r\n        }\r\n      },\r\n      created() {\r\n        const userInfo = getUserInfo()\r\n        this.form.studentId = userInfo.id\r\n        this.getInfo()\r\n      },\r\n      methods: {\r\n        //向后台获取信息\r\n        async getInfo() {\r\n          const result = await getCourseByCondition(this.queryStudentParam)\r\n          this.tableData = result.data.data\r\n          this.total = result.data.total\r\n        },\r\n        //处理页面大小的改变\r\n        handleSizeChange(e) {\r\n          this.queryStudentParam.pageSize = e\r\n          this.getInfo()\r\n        },\r\n        //处理当前页数的改变\r\n        handleCurrentChange(e) {\r\n          console.log(e)\r\n          this.queryStudentParam.currentPage = e\r\n          this.getInfo()\r\n        },\r\n\r\n        //详情表单\r\n        openCourseDetail(row) {\r\n            this.detailCourseData = row\r\n            this.dialogFormVisible = true\r\n        },\r\n\r\n        //选课\r\n        selectTheCourse(row) {\r\n            // console.log(row)\r\n            this.$confirm('您确定选择这门课程吗？', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(async () => {   \r\n                this.form.courseId = row.courseId\r\n                const result = await studentSelectCourse(this.form)\r\n                if (result.data.code === 1) {\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: '选课成功！'\r\n                    })\r\n                } else {\r\n                    this.$message({\r\n                        type: 'warning',\r\n                        message: '您已经选择了该课程，可前往我的课程查看'\r\n                    })\r\n                }\r\n            }).catch(() => {\r\n                this.$message({\r\n                    type: 'info',\r\n                    message: '已取消选课'\r\n                })   \r\n            })\r\n        },\r\n\r\n        //退课\r\n        // async exitTheCourse(row) {\r\n        //     //判断是否选了这门课\r\n        //     if (this.judgeCourseSelectedStatus(row.courseId) == false) {\r\n        //         this.$message({\r\n        //             type: \"warning\",\r\n        //             message: \"您还未选择该门课程哦~\"\r\n        //         })\r\n        //     }\r\n        //     //提示\r\n        //     else {\r\n        //         this.$confirm('您确定退选这门课程吗？', '提示', {\r\n        //             confirmButtonText: '确定',\r\n        //             cancelButtonText: '取消',\r\n        //             type: 'warning'\r\n        //         }).then(async () => {   \r\n        //             this.form.courseId = row.courseId\r\n        //             const reuslt = await exitCourse(this.form)\r\n        //             if (reuslt.data.code === 1) {\r\n        //                 this.$message({\r\n        //                         type: 'success',\r\n        //                         message: '退课成功！'\r\n        //                 })\r\n        //             }\r\n        //         }).catch(() => {\r\n        //             this.$message({\r\n        //                 type: 'info',\r\n        //                 message: '已取消退课'\r\n        //             })   \r\n        //         })\r\n        //     }\r\n        // },\r\n\r\n        // //判断是否需要退课\r\n        // async judgeCourseSelectedStatus(couseId) {\r\n        //     let form = {\r\n        //         couseId,\r\n        //         studentId: '24'\r\n        //     }\r\n        //     const result = await judgeCourseSelectedStatus(form)\r\n        //     console.log(result)\r\n        //     return result.data.code == 1\r\n        // }\r\n\r\n      }\r\n    }\r\n  </script>\r\n  \r\n  <style scoped>\r\n    .root {\r\n      text-align: center;\r\n    }\r\n    .el-row {\r\n      margin-bottom: 16px;\r\n    }\r\n  </style>"],"mappings":"AAmIA,SAAAA,WAAA;AACA,SACAC,oBAAA,EACAC;AACA;AACA;AAAA,OACA;AACA;EACAC,KAAA;IACA;MACA;MACAC,iBAAA;QACAC,QAAA;QAAA;QACAC,WAAA;QAAA;QACAC,KAAA;UACAC,IAAA;UAAA;UACAC,WAAA;UAAA;UACAC,cAAA;QACA;MACA;;MACAC,KAAA;MAAA;MACAC,SAAA;MAAA;MACAC,iBAAA;MAAA;MACAC,gBAAA;MAAA;MACA;MACAC,IAAA;QACAC,QAAA;QACAC,SAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,MAAAC,QAAA,GAAAnB,WAAA;IACA,KAAAe,IAAA,CAAAE,SAAA,GAAAE,QAAA,CAAAC,EAAA;IACA,KAAAC,OAAA;EACA;EACAC,OAAA;IACA;IACA,MAAAD,QAAA;MACA,MAAAE,MAAA,SAAAtB,oBAAA,MAAAG,iBAAA;MACA,KAAAQ,SAAA,GAAAW,MAAA,CAAApB,IAAA,CAAAA,IAAA;MACA,KAAAQ,KAAA,GAAAY,MAAA,CAAApB,IAAA,CAAAQ,KAAA;IACA;IACA;IACAa,iBAAAC,CAAA;MACA,KAAArB,iBAAA,CAAAC,QAAA,GAAAoB,CAAA;MACA,KAAAJ,OAAA;IACA;IACA;IACAK,oBAAAD,CAAA;MACAE,OAAA,CAAAC,GAAA,CAAAH,CAAA;MACA,KAAArB,iBAAA,CAAAE,WAAA,GAAAmB,CAAA;MACA,KAAAJ,OAAA;IACA;IAEA;IACAQ,iBAAAC,GAAA;MACA,KAAAhB,gBAAA,GAAAgB,GAAA;MACA,KAAAjB,iBAAA;IACA;IAEA;IACAkB,gBAAAD,GAAA;MACA;MACA,KAAAE,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAC,IAAA;QACA,KAAArB,IAAA,CAAAC,QAAA,GAAAc,GAAA,CAAAd,QAAA;QACA,MAAAO,MAAA,SAAArB,mBAAA,MAAAa,IAAA;QACA,IAAAQ,MAAA,CAAApB,IAAA,CAAAkC,IAAA;UACA,KAAAC,QAAA;YACAH,IAAA;YACAI,OAAA;UACA;QACA;UACA,KAAAD,QAAA;YACAH,IAAA;YACAI,OAAA;UACA;QACA;MACA,GAAAC,KAAA;QACA,KAAAF,QAAA;UACAH,IAAA;UACAI,OAAA;QACA;MACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}