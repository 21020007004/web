{"ast":null,"code":"import CourseDetailHeader from '@/components/CourseDetailHeader.vue';\nimport { getSelectTheCourseStudents, getCourseById, updateStudentScore } from '@/api/course/course.js';\nexport default {\n  data() {\n    return {\n      dialogFormVisible: false,\n      //控制对话框是否显示\n      courseId: '',\n      //课程id，暂时写死\n      courseInfo: {},\n      //课程信息\n      student: [],\n      form: {\n        score: '',\n        //成绩\n        courseId: '',\n        studentId: ''\n      }\n    };\n  },\n  components: {\n    CourseDetailHeader\n  },\n  created() {\n    this.getCourseById();\n    this.getSelectTheCourseStudents();\n  },\n  methods: {\n    //查询选择了某门课的学生\n    async getSelectTheCourseStudents() {\n      const result = await getSelectTheCourseStudents(this.courseId);\n      if (result.data.code === 1) {\n        this.student = result.data.data;\n      }\n    },\n    //根据课程id查询相应的课程信息\n    async getCourseById() {\n      this.courseId = this.$route.query.courseId;\n      const result = await getCourseById(this.$route.query.courseId);\n      console.log(result);\n      if (result.data.code === 1) {\n        this.courseInfo = result.data.data;\n      }\n    },\n    //评分\n    setScore(row) {\n      if (this.courseInfo.courseStatusName != '已结课') {\n        this.$message({\n          type: 'warning',\n          message: '课程未结课，不能评分！'\n        });\n        return;\n      }\n      this.form.courseId = this.courseInfo.courseId;\n      this.form.studentId = row.studentId;\n      this.dialogFormVisible = true;\n    },\n    //提交评分（学生成绩）\n    async updateStudentScore() {\n      await updateStudentScore(this.form);\n      this.dialogFormVisible = false;\n      this.getSelectTheCourseStudents();\n    }\n  }\n};","map":{"version":3,"names":["CourseDetailHeader","getSelectTheCourseStudents","getCourseById","updateStudentScore","data","dialogFormVisible","courseId","courseInfo","student","form","score","studentId","components","created","methods","result","code","$route","query","console","log","setScore","row","courseStatusName","$message","type","message"],"sources":["src/views/manager/TeacherCourseDetail.vue"],"sourcesContent":["<!-- 教师课程详情页 -->\r\n<template>\r\n    <div>\r\n        <CourseDetailHeader>\r\n          <template slot=\"title\">{{ courseInfo.name }}</template>\r\n          <template slot=\"tag\">\r\n            <el-tag\r\n                type=\"warning\"\r\n                size=\"mini\"\r\n                style=\"margin-left: 8px;\"\r\n              >\r\n                {{ courseInfo.courseStatusName }}\r\n            </el-tag>\r\n          </template>\r\n          <template slot=\"time\">{{ courseInfo.time }}</template>\r\n          <template slot=\"placeName\">{{ courseInfo.placeName }}</template>\r\n          <template slot=\"description\">{{ courseInfo.description }}</template>\r\n        </CourseDetailHeader>\r\n        <div>\r\n            <el-tabs>\r\n                <el-tab-pane label=\"学生列表\">\r\n                    <el-table\r\n                    :data=\"student\"\r\n                    height=\"50vh\"\r\n                    style=\"width: 100%;\">\r\n                        <el-table-column\r\n                            prop=\"name\"\r\n                            label=\"姓名\"\r\n                            width=\"220%\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            prop=\"studentNumber\"\r\n                            label=\"学号\"\r\n                            width=\"220%\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            prop=\"studentClass\"\r\n                            label=\"班级\"\r\n                            width=\"220%\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            prop=\"score\"\r\n                            label=\"成绩\"\r\n                            width=\"220%\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                        fixed=\"right\"\r\n                        label=\"操作\"\r\n                        width=\"200\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-button type=\"text\" size=\"small\" @click=\"setScore(scope.row)\">评分</el-button>\r\n                        </template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n                </el-tab-pane>\r\n            </el-tabs>\r\n        </div>\r\n\r\n\r\n        <!-- 对话框 -->\r\n        <el-dialog title=\"评分\" :visible.sync=\"dialogFormVisible\" style=\"width: 60%; margin: 0 auto;\">\r\n          <el-form :model=\"form\">\r\n            <el-form-item label=\"成绩：\">\r\n              <el-input v-model=\"form.score\" autocomplete=\"off\"></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"updateStudentScore()\">确 定</el-button>\r\n          </div>\r\n      </el-dialog>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport CourseDetailHeader from '@/components/CourseDetailHeader.vue'\r\nimport { getSelectTheCourseStudents, getCourseById, updateStudentScore } from '@/api/course/course.js'\r\nexport default {\r\n    data() {\r\n      return {\r\n        dialogFormVisible: false, //控制对话框是否显示\r\n        courseId: '',//课程id，暂时写死\r\n        courseInfo: {}, //课程信息\r\n        student: [],\r\n        form: {\r\n          score: '',  //成绩\r\n          courseId: '',\r\n          studentId: ''\r\n        }\r\n      }\r\n    },\r\n    components: {\r\n        CourseDetailHeader\r\n    },\r\n    created() {\r\n      this.getCourseById()\r\n      this.getSelectTheCourseStudents()\r\n    },\r\n    methods: {\r\n      //查询选择了某门课的学生\r\n      async getSelectTheCourseStudents() {\r\n         const result = await getSelectTheCourseStudents(this.courseId)\r\n         if (result.data.code === 1) {\r\n          this.student = result.data.data\r\n         }\r\n      },\r\n      //根据课程id查询相应的课程信息\r\n      async getCourseById() {\r\n        this.courseId = this.$route.query.courseId\r\n        const result = await getCourseById(this.$route.query.courseId)\r\n        console.log(result)\r\n        if (result.data.code === 1) {\r\n          this.courseInfo = result.data.data\r\n        }\r\n      },\r\n\r\n      //评分\r\n      setScore(row) {\r\n        if (this.courseInfo.courseStatusName != '已结课') {\r\n          this.$message({\r\n            type: 'warning',\r\n            message: '课程未结课，不能评分！'\r\n          })\r\n          return\r\n        }\r\n        this.form.courseId = this.courseInfo.courseId\r\n        this.form.studentId = row.studentId\r\n        this.dialogFormVisible = true\r\n      },\r\n\r\n      //提交评分（学生成绩）\r\n      async updateStudentScore() {\r\n        await updateStudentScore(this.form)\r\n        this.dialogFormVisible = false\r\n        this.getSelectTheCourseStudents()\r\n      }\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":"AA4EA,OAAAA,kBAAA;AACA,SAAAC,0BAAA,EAAAC,aAAA,EAAAC,kBAAA;AACA;EACAC,KAAA;IACA;MACAC,iBAAA;MAAA;MACAC,QAAA;MAAA;MACAC,UAAA;MAAA;MACAC,OAAA;MACAC,IAAA;QACAC,KAAA;QAAA;QACAJ,QAAA;QACAK,SAAA;MACA;IACA;EACA;EACAC,UAAA;IACAZ;EACA;EACAa,QAAA;IACA,KAAAX,aAAA;IACA,KAAAD,0BAAA;EACA;EACAa,OAAA;IACA;IACA,MAAAb,2BAAA;MACA,MAAAc,MAAA,SAAAd,0BAAA,MAAAK,QAAA;MACA,IAAAS,MAAA,CAAAX,IAAA,CAAAY,IAAA;QACA,KAAAR,OAAA,GAAAO,MAAA,CAAAX,IAAA,CAAAA,IAAA;MACA;IACA;IACA;IACA,MAAAF,cAAA;MACA,KAAAI,QAAA,QAAAW,MAAA,CAAAC,KAAA,CAAAZ,QAAA;MACA,MAAAS,MAAA,SAAAb,aAAA,MAAAe,MAAA,CAAAC,KAAA,CAAAZ,QAAA;MACAa,OAAA,CAAAC,GAAA,CAAAL,MAAA;MACA,IAAAA,MAAA,CAAAX,IAAA,CAAAY,IAAA;QACA,KAAAT,UAAA,GAAAQ,MAAA,CAAAX,IAAA,CAAAA,IAAA;MACA;IACA;IAEA;IACAiB,SAAAC,GAAA;MACA,SAAAf,UAAA,CAAAgB,gBAAA;QACA,KAAAC,QAAA;UACAC,IAAA;UACAC,OAAA;QACA;QACA;MACA;MACA,KAAAjB,IAAA,CAAAH,QAAA,QAAAC,UAAA,CAAAD,QAAA;MACA,KAAAG,IAAA,CAAAE,SAAA,GAAAW,GAAA,CAAAX,SAAA;MACA,KAAAN,iBAAA;IACA;IAEA;IACA,MAAAF,mBAAA;MACA,MAAAA,kBAAA,MAAAM,IAAA;MACA,KAAAJ,iBAAA;MACA,KAAAJ,0BAAA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}