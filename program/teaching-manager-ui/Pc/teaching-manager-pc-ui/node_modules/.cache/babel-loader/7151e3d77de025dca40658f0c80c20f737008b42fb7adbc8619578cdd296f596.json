{"ast":null,"code":"import CourseAppliactionItem from '@/components/CourseAppliactionItem.vue';\nimport { getWaitExamination, getAlreadyExamination } from '@/api/course-examination/course-examination.js';\nexport default {\n  data() {\n    return {\n      activeName: 'await',\n      isShowButton: 'true',\n      //tab数据项\n      tab: [{\n        id: '1',\n        label: '待审批',\n        name: 'await'\n      }, {\n        id: '2',\n        label: '已审批',\n        name: 'already'\n      }],\n      applicationData: [] //申请记录\n    };\n  },\n\n  components: {\n    CourseAppliactionItem\n  },\n  created() {\n    this.getWaitInfo();\n  },\n  methods: {\n    //更新页面\n    refresh() {\n      console.log(this.activeName);\n      if (this.activeName === 'await') {\n        this.getWaitInfo(this.tab[0].label);\n        this.isShowButton = 'true';\n      }\n      if (this.activeName === 'already') {\n        this.getAlreadyInfo(this.tab[1].label);\n        this.isShowButton = 'false';\n      }\n    },\n    //获取所有待审批的记录\n    async getWaitInfo() {\n      const result = await getWaitExamination(\"待审批\");\n      if (result.data.code === 1) {\n        this.applicationData = result.data.data;\n      }\n    },\n    //获取所有已经审批了的记录\n    async getAlreadyInfo() {\n      const result = await getAlreadyExamination(\"待审批\");\n      if (result.data.code === 1) {\n        this.applicationData = result.data.data;\n      }\n    },\n    handleClick(tab) {\n      const name = tab.$options.propsData.name;\n      switch (name) {\n        case this.tab[0].name:\n          this.getWaitInfo(this.tab[0].label);\n          this.isShowButton = 'true';\n          break;\n        case this.tab[1].name:\n          this.getAlreadyInfo(this.tab[1].label);\n          this.isShowButton = 'false';\n          break;\n        default:\n          break;\n      }\n    }\n  }\n};","map":{"version":3,"names":["CourseAppliactionItem","getWaitExamination","getAlreadyExamination","data","activeName","isShowButton","tab","id","label","name","applicationData","components","created","getWaitInfo","methods","refresh","console","log","getAlreadyInfo","result","code","handleClick","$options","propsData"],"sources":["src/views/course/CourseExamination.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n            <el-tab-pane :label=\"item.label\" :name=\"item.name\" v-for=\"item in tab\" :key=\"item.id\">\r\n                <div class=\"container\">\r\n                    <el-empty description=\"暂无数据\" v-if=\"applicationData.length === 0\"></el-empty>\r\n                    <CourseAppliactionItem v-for=\"item in applicationData\"  :courseApplicationId=\"item.courseApplicationId\"\r\n                    :isShowButton=\"isShowButton\" @refresh=\"refresh()\" :key=\"item.courseApplicationId\" :if=\"applicationData.length > 0\">\r\n                        <template slot=\"userName\">{{ item.teacherName }}</template>\r\n                        <template slot=\"operation\"> {{ item.operationName }}</template>                        \r\n                        <template slot=\"course\">{{ item.courseName }}</template>\r\n                        <template slot=\"dateTime\">{{ item.dateTime }}</template>\r\n                        <template slot=\"courseExaminationName\">\r\n                            <el-tag type=\"warning\" size=\"mini\" class=\"tag\" v-if=\"item.courseExaminationName === '待审批'\">\r\n                                {{ item.courseExaminationName }}\r\n                            </el-tag>\r\n                            <el-tag type=\"success\" size=\"mini\" class=\"tag\" v-if=\"item.courseExaminationName === '已通过'\">\r\n                                {{ item.courseExaminationName }}\r\n                            </el-tag>\r\n                            <el-tag type=\"danger\" size=\"mini\" class=\"tag\" v-if=\"item.courseExaminationName === '未通过'\">\r\n                                {{ item.courseExaminationName }}\r\n                            </el-tag>\r\n                        </template>\r\n                    </CourseAppliactionItem>\r\n                </div>\r\n            </el-tab-pane>\r\n        </el-tabs>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport CourseAppliactionItem from '@/components/CourseAppliactionItem.vue'\r\nimport { \r\n    getWaitExamination, \r\n    getAlreadyExamination\r\n} from '@/api/course-examination/course-examination.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            activeName: 'await',\r\n            isShowButton: 'true',\r\n            //tab数据项\r\n            tab: [\r\n                {\r\n                    id: '1',\r\n                    label: '待审批',\r\n                    name: 'await'\r\n                },\r\n                {\r\n                    id: '2',\r\n                    label: '已审批',\r\n                    name: 'already'         \r\n                }\r\n            ],\r\n            applicationData: []                 //申请记录\r\n        }\r\n    },\r\n    components: {\r\n        CourseAppliactionItem\r\n    },\r\n    created() {\r\n        this.getWaitInfo()\r\n    },\r\n    methods: {\r\n        //更新页面\r\n        refresh() {\r\n            console.log(this.activeName)\r\n            if (this.activeName === 'await') {\r\n                this.getWaitInfo(this.tab[0].label)\r\n                this.isShowButton = 'true'\r\n            } \r\n            if (this.activeName === 'already') {\r\n                this.getAlreadyInfo(this.tab[1].label)\r\n                this.isShowButton = 'false'\r\n            }\r\n        },\r\n        //获取所有待审批的记录\r\n        async getWaitInfo() {\r\n            const result = await getWaitExamination(\"待审批\")\r\n            if (result.data.code === 1) {\r\n                this.applicationData = result.data.data\r\n            }\r\n        },\r\n        //获取所有已经审批了的记录\r\n        async getAlreadyInfo() {\r\n            const result = await getAlreadyExamination(\"待审批\")\r\n            if (result.data.code === 1) {\r\n                this.applicationData = result.data.data\r\n            }\r\n        },\r\n        handleClick(tab) {\r\n            const name = tab.$options.propsData.name\r\n            switch(name) {\r\n                case this.tab[0].name:\r\n                    this.getWaitInfo(this.tab[0].label)\r\n                    this.isShowButton = 'true'\r\n                    break\r\n                case this.tab[1].name:\r\n                    this.getAlreadyInfo(this.tab[1].label)\r\n                    this.isShowButton = 'false'\r\n                    break\r\n                default:\r\n                    break\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>    \r\n    .container {\r\n        overflow-y: auto;\r\n        height: 76vh;\r\n        width: 100%;\r\n    }\r\n</style>"],"mappings":"AA+BA,OAAAA,qBAAA;AACA,SACAC,kBAAA,EACAC,qBAAA,QACA;AACA;EACAC,KAAA;IACA;MACAC,UAAA;MACAC,YAAA;MACA;MACAC,GAAA,GACA;QACAC,EAAA;QACAC,KAAA;QACAC,IAAA;MACA,GACA;QACAF,EAAA;QACAC,KAAA;QACAC,IAAA;MACA,EACA;MACAC,eAAA;IACA;EACA;;EACAC,UAAA;IACAX;EACA;EACAY,QAAA;IACA,KAAAC,WAAA;EACA;EACAC,OAAA;IACA;IACAC,QAAA;MACAC,OAAA,CAAAC,GAAA,MAAAb,UAAA;MACA,SAAAA,UAAA;QACA,KAAAS,WAAA,MAAAP,GAAA,IAAAE,KAAA;QACA,KAAAH,YAAA;MACA;MACA,SAAAD,UAAA;QACA,KAAAc,cAAA,MAAAZ,GAAA,IAAAE,KAAA;QACA,KAAAH,YAAA;MACA;IACA;IACA;IACA,MAAAQ,YAAA;MACA,MAAAM,MAAA,SAAAlB,kBAAA;MACA,IAAAkB,MAAA,CAAAhB,IAAA,CAAAiB,IAAA;QACA,KAAAV,eAAA,GAAAS,MAAA,CAAAhB,IAAA,CAAAA,IAAA;MACA;IACA;IACA;IACA,MAAAe,eAAA;MACA,MAAAC,MAAA,SAAAjB,qBAAA;MACA,IAAAiB,MAAA,CAAAhB,IAAA,CAAAiB,IAAA;QACA,KAAAV,eAAA,GAAAS,MAAA,CAAAhB,IAAA,CAAAA,IAAA;MACA;IACA;IACAkB,YAAAf,GAAA;MACA,MAAAG,IAAA,GAAAH,GAAA,CAAAgB,QAAA,CAAAC,SAAA,CAAAd,IAAA;MACA,QAAAA,IAAA;QACA,UAAAH,GAAA,IAAAG,IAAA;UACA,KAAAI,WAAA,MAAAP,GAAA,IAAAE,KAAA;UACA,KAAAH,YAAA;UACA;QACA,UAAAC,GAAA,IAAAG,IAAA;UACA,KAAAS,cAAA,MAAAZ,GAAA,IAAAE,KAAA;UACA,KAAAH,YAAA;UACA;QACA;UACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}