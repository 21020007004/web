{"ast":null,"code":"import CourseApplicationForm from '@/components/CourseApplicationForm.vue';\nimport CourseAppliactionItem from '@/components/CourseAppliactionItem.vue';\nimport { getAllApplicationByTeacherId, getApplicationByTeacherIdAndExaminationName } from '@/api/course-application/course-application.js';\nimport { getUserInfo } from '@/utils/storage.js';\nexport default {\n  data() {\n    return {\n      activeName: 'all',\n      //tab数据项\n      tab: [{\n        id: '1',\n        label: '全部',\n        name: 'all'\n      }, {\n        id: '2',\n        label: '待审批',\n        name: 'await'\n      }, {\n        id: '3',\n        label: '已通过',\n        name: 'pass'\n      }, {\n        id: '4',\n        label: '未通过',\n        name: 'no-pass'\n      }],\n      //申请记录\n      courseApplication: {\n        courseApplicationId: '',\n        //课程申请id\n        teacherId: '',\n        //教师id\n        teacherName: '',\n        //教师名称\n        courseId: '',\n        //课程id\n        courseName: '',\n        //课程名称\n        courseCredit: '',\n        //课程学分\n        courseHour: '',\n        //课程学时\n        courseTime: '',\n        //授课时间\n        coursePlaceId: '',\n        //授课地点id\n        coursePlaceName: '',\n        //授课地点名称\n        courseDescription: '',\n        //课程描述\n        courseExaminationId: '',\n        //审批状态id\n        courseExaminationName: '',\n        //审批状态名称\n        operationId: '',\n        //操作id\n        operationName: '',\n        //操作名称\n        dateTime: '' //申请时间\n      },\n\n      applicationData: [] //申请记录\n    };\n  },\n\n  components: {\n    CourseApplicationForm,\n    CourseAppliactionItem\n  },\n  async created() {\n    const userInfo = getUserInfo();\n    this.courseApplication.teacherId = userInfo.id;\n    this.getAllApplication();\n  },\n  methods: {\n    //更新页面\n    refresh() {\n      console.log(this.activeName);\n      for (let i = 0; i < this.tab.length; i++) {\n        if (this.tab[i].name === this.activeName) {\n          this.getCoditionApplication(this.tab[i].label);\n          break;\n        }\n      }\n    },\n    //获取全部审批项\n    async getAllApplication() {\n      const result = await getAllApplicationByTeacherId(this.courseApplication.teacherId);\n      console.log(result);\n      if (result.data.code === 1) {\n        this.applicationData = result.data.data;\n      }\n    },\n    //根据条件获取相应审批项\n    async getCoditionApplication(courseExaminationName) {\n      const teacherId = this.courseApplication.teacherId;\n      const result = await getApplicationByTeacherIdAndExaminationName(teacherId, courseExaminationName);\n      if (result.data.code === 1) {\n        this.applicationData = result.data.data;\n      }\n    },\n    //tab栏切换事件\n    handleClick(tab) {\n      console.log(tab.$options.propsData.name);\n      const name = tab.$options.propsData.name;\n      switch (name) {\n        case this.tab[0].name:\n          this.getAllApplication();\n          break;\n        case this.tab[1].name:\n          this.getCoditionApplication(this.tab[1].label);\n          break;\n        case this.tab[2].name:\n          this.getCoditionApplication(this.tab[2].label);\n          break;\n        case this.tab[3].name:\n          this.getCoditionApplication(this.tab[3].label);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n};","map":{"version":3,"names":["CourseApplicationForm","CourseAppliactionItem","getAllApplicationByTeacherId","getApplicationByTeacherIdAndExaminationName","getUserInfo","data","activeName","tab","id","label","name","courseApplication","courseApplicationId","teacherId","teacherName","courseId","courseName","courseCredit","courseHour","courseTime","coursePlaceId","coursePlaceName","courseDescription","courseExaminationId","courseExaminationName","operationId","operationName","dateTime","applicationData","components","created","userInfo","getAllApplication","methods","refresh","console","log","i","length","getCoditionApplication","result","code","handleClick","$options","propsData"],"sources":["src/views/course/CourseApplication.vue"],"sourcesContent":["<template>\r\n    <div class=\"root\">\r\n        <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\" style=\"user-select: none;\">\r\n            <el-tab-pane :label=\"item.label\" :name=\"item.name\" v-for=\"item in tab\" :key=\"item.id\">\r\n                <div class=\"container\">\r\n                    <el-empty description=\"暂无数据\" v-if=\"applicationData.length === 0\"></el-empty>\r\n                    <CourseAppliactionItem v-for=\"item in applicationData\" :courseApplicationId=\"item.courseApplicationId\" \r\n                    isShowButton=\"false\" @refresh=\"refresh\" :key=\"item.courseApplicationId\" :if=\"applicationData.length > 0\">\r\n                        <template slot=\"userName\">{{ item.teacherName }}</template>\r\n                        <template slot=\"operation\"> {{ item.operationName }}</template>                        \r\n                        <template slot=\"course\">{{ item.courseName }}</template>\r\n                        <template slot=\"dateTime\">{{ item.dateTime }}</template>\r\n                        <template slot=\"courseExaminationName\">\r\n                            <el-tag type=\"warning\" size=\"mini\" class=\"tag\" v-if=\"item.courseExaminationName === tab[1].label\">\r\n                                {{ item.courseExaminationName }}\r\n                            </el-tag>\r\n                            <el-tag type=\"success\" size=\"mini\" class=\"tag\" v-if=\"item.courseExaminationName === tab[2].label\">\r\n                                {{ item.courseExaminationName }}\r\n                            </el-tag>\r\n                            <el-tag type=\"danger\" size=\"mini\" class=\"tag\" v-if=\"item.courseExaminationName === tab[3].label\">\r\n                                {{ item.courseExaminationName }}\r\n                            </el-tag>\r\n                        </template>\r\n                    </CourseAppliactionItem>\r\n                </div>\r\n            </el-tab-pane>\r\n            <el-tab-pane>\r\n                <span slot=\"label\"><i class=\"el-icon-edit-outline\"></i> 申 请</span>\r\n                <CourseApplicationForm></CourseApplicationForm>\r\n            </el-tab-pane>\r\n        </el-tabs>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport CourseApplicationForm from '@/components/CourseApplicationForm.vue'\r\nimport CourseAppliactionItem from '@/components/CourseAppliactionItem.vue'\r\nimport { \r\n    getAllApplicationByTeacherId,\r\n    getApplicationByTeacherIdAndExaminationName\r\n} from '@/api/course-application/course-application.js'\r\nimport { getUserInfo } from '@/utils/storage.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            activeName: 'all',\r\n            //tab数据项\r\n            tab: [\r\n                {\r\n                    id: '1',\r\n                    label: '全部',\r\n                    name: 'all'\r\n                },\r\n                {\r\n                    id: '2',\r\n                    label: '待审批',\r\n                    name: 'await'\r\n                },\r\n                {\r\n                    id: '3',\r\n                    label: '已通过',\r\n                    name: 'pass'\r\n                },\r\n                {\r\n                    id: '4',\r\n                    label: '未通过',\r\n                    name: 'no-pass'\r\n                }\r\n            ],\r\n            //申请记录\r\n            courseApplication: {\r\n                courseApplicationId: '',        //课程申请id\r\n                teacherId: '',                 //教师id\r\n                teacherName: '',                //教师名称\r\n                courseId: '',                   //课程id\r\n                courseName: '',                 //课程名称\r\n                courseCredit: '',               //课程学分\r\n                courseHour: '',                 //课程学时\r\n                courseTime: '',                 //授课时间\r\n                coursePlaceId: '',              //授课地点id\r\n                coursePlaceName: '',            //授课地点名称\r\n                courseDescription: '',          //课程描述\r\n                courseExaminationId: '',        //审批状态id\r\n                courseExaminationName: '',      //审批状态名称\r\n                operationId: '',                //操作id\r\n                operationName: '',              //操作名称\r\n                dateTime: ''                    //申请时间\r\n            },\r\n            applicationData: []                 //申请记录\r\n        }\r\n    },\r\n    components: {\r\n        CourseApplicationForm,\r\n        CourseAppliactionItem\r\n    },\r\n    async created() {\r\n        const userInfo = getUserInfo()\r\n        this.courseApplication.teacherId = userInfo.id\r\n        this.getAllApplication()\r\n    },\r\n    methods: {\r\n        //更新页面\r\n        refresh() {\r\n            console.log(this.activeName)\r\n            for (let i = 0; i < this.tab.length; i++) {\r\n                if (this.tab[i].name === this.activeName) {\r\n                    this.getCoditionApplication(this.tab[i].label)\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        //获取全部审批项\r\n        async getAllApplication() {\r\n            const result = await getAllApplicationByTeacherId(this.courseApplication.teacherId)\r\n            console.log(result)\r\n            if (result.data.code === 1) {\r\n                this.applicationData = result.data.data\r\n            }\r\n        },\r\n        //根据条件获取相应审批项\r\n        async getCoditionApplication(courseExaminationName) {\r\n            const teacherId = this.courseApplication.teacherId\r\n            const result = await getApplicationByTeacherIdAndExaminationName(teacherId,courseExaminationName)\r\n            if (result.data.code === 1) {\r\n                this.applicationData = result.data.data\r\n            }\r\n        },\r\n        //tab栏切换事件\r\n        handleClick(tab) {\r\n            console.log(tab.$options.propsData.name)\r\n            const name = tab.$options.propsData.name\r\n            switch(name) {\r\n                case this.tab[0].name:\r\n                    this.getAllApplication()\r\n                    break\r\n                case this.tab[1].name:\r\n                    this.getCoditionApplication(this.tab[1].label)\r\n                    break\r\n                case this.tab[2].name:\r\n                    this.getCoditionApplication(this.tab[2].label)\r\n                    break\r\n                case this.tab[3].name:\r\n                    this.getCoditionApplication(this.tab[3].label)\r\n                    break\r\n                default:\r\n                    break\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .container {\r\n        overflow-y: auto;\r\n        height: 76vh;\r\n        width: 100%;\r\n    }\r\n</style>\r\n"],"mappings":"AAmCA,OAAAA,qBAAA;AACA,OAAAC,qBAAA;AACA,SACAC,4BAAA,EACAC,2CAAA,QACA;AACA,SAAAC,WAAA;AACA;EACAC,KAAA;IACA;MACAC,UAAA;MACA;MACAC,GAAA,GACA;QACAC,EAAA;QACAC,KAAA;QACAC,IAAA;MACA,GACA;QACAF,EAAA;QACAC,KAAA;QACAC,IAAA;MACA,GACA;QACAF,EAAA;QACAC,KAAA;QACAC,IAAA;MACA,GACA;QACAF,EAAA;QACAC,KAAA;QACAC,IAAA;MACA,EACA;MACA;MACAC,iBAAA;QACAC,mBAAA;QAAA;QACAC,SAAA;QAAA;QACAC,WAAA;QAAA;QACAC,QAAA;QAAA;QACAC,UAAA;QAAA;QACAC,YAAA;QAAA;QACAC,UAAA;QAAA;QACAC,UAAA;QAAA;QACAC,aAAA;QAAA;QACAC,eAAA;QAAA;QACAC,iBAAA;QAAA;QACAC,mBAAA;QAAA;QACAC,qBAAA;QAAA;QACAC,WAAA;QAAA;QACAC,aAAA;QAAA;QACAC,QAAA;MACA;;MACAC,eAAA;IACA;EACA;;EACAC,UAAA;IACA7B,qBAAA;IACAC;EACA;EACA,MAAA6B,QAAA;IACA,MAAAC,QAAA,GAAA3B,WAAA;IACA,KAAAO,iBAAA,CAAAE,SAAA,GAAAkB,QAAA,CAAAvB,EAAA;IACA,KAAAwB,iBAAA;EACA;EACAC,OAAA;IACA;IACAC,QAAA;MACAC,OAAA,CAAAC,GAAA,MAAA9B,UAAA;MACA,SAAA+B,CAAA,MAAAA,CAAA,QAAA9B,GAAA,CAAA+B,MAAA,EAAAD,CAAA;QACA,SAAA9B,GAAA,CAAA8B,CAAA,EAAA3B,IAAA,UAAAJ,UAAA;UACA,KAAAiC,sBAAA,MAAAhC,GAAA,CAAA8B,CAAA,EAAA5B,KAAA;UACA;QACA;MACA;IACA;IACA;IACA,MAAAuB,kBAAA;MACA,MAAAQ,MAAA,SAAAtC,4BAAA,MAAAS,iBAAA,CAAAE,SAAA;MACAsB,OAAA,CAAAC,GAAA,CAAAI,MAAA;MACA,IAAAA,MAAA,CAAAnC,IAAA,CAAAoC,IAAA;QACA,KAAAb,eAAA,GAAAY,MAAA,CAAAnC,IAAA,CAAAA,IAAA;MACA;IACA;IACA;IACA,MAAAkC,uBAAAf,qBAAA;MACA,MAAAX,SAAA,QAAAF,iBAAA,CAAAE,SAAA;MACA,MAAA2B,MAAA,SAAArC,2CAAA,CAAAU,SAAA,EAAAW,qBAAA;MACA,IAAAgB,MAAA,CAAAnC,IAAA,CAAAoC,IAAA;QACA,KAAAb,eAAA,GAAAY,MAAA,CAAAnC,IAAA,CAAAA,IAAA;MACA;IACA;IACA;IACAqC,YAAAnC,GAAA;MACA4B,OAAA,CAAAC,GAAA,CAAA7B,GAAA,CAAAoC,QAAA,CAAAC,SAAA,CAAAlC,IAAA;MACA,MAAAA,IAAA,GAAAH,GAAA,CAAAoC,QAAA,CAAAC,SAAA,CAAAlC,IAAA;MACA,QAAAA,IAAA;QACA,UAAAH,GAAA,IAAAG,IAAA;UACA,KAAAsB,iBAAA;UACA;QACA,UAAAzB,GAAA,IAAAG,IAAA;UACA,KAAA6B,sBAAA,MAAAhC,GAAA,IAAAE,KAAA;UACA;QACA,UAAAF,GAAA,IAAAG,IAAA;UACA,KAAA6B,sBAAA,MAAAhC,GAAA,IAAAE,KAAA;UACA;QACA,UAAAF,GAAA,IAAAG,IAAA;UACA,KAAA6B,sBAAA,MAAAhC,GAAA,IAAAE,KAAA;UACA;QACA;UACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}