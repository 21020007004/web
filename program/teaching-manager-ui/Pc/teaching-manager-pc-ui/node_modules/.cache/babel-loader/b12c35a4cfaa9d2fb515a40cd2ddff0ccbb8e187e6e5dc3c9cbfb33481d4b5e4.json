{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { login } from '@/api/login/login.js';\nimport { saveUserLoginToken, saveUserInfo } from '@/utils/storage.js';\nexport default {\n  name: 'LoginView',\n  data() {\n    return {\n      form: {\n        password: '',\n        account: '',\n        authority: ''\n      }\n    };\n  },\n  methods: {\n    async login() {\n      const result = await login(this.form);\n      console.log(result);\n      if (result.data.code === 1) {\n        await this.saveInfo(result.data.data);\n        this.$nextTick(() => {\n          this.$nextTick(() => {\n            this.$router.push('/home');\n          });\n        });\n      } else {\n        this.$message({\n          type: 'error',\n          message: '账号或密码错误！'\n        });\n      }\n    },\n    //存储后端返回的数据\n    async saveInfo(data) {\n      saveUserLoginToken(data.token);\n      saveUserInfo(data);\n    }\n  }\n};","map":{"version":3,"names":["login","saveUserLoginToken","saveUserInfo","name","data","form","password","account","authority","methods","result","console","log","code","saveInfo","$nextTick","$router","push","$message","type","message","token"],"sources":["src/views/login/Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"back\"> \r\n        <div>\r\n            <h1>高 校 教 务 系 统</h1>\r\n            <div class=\"block\">\r\n                <el-form ref=\"ruleForm\" label-width=\"60px\" status-icon>\r\n                    <el-form-item label=\"用户名：\" prop=\"pass\">\r\n                        <el-input type=\"text\" v-model=\"form.account\" autocomplete=\"off\" size=\"small\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"密码：\" prop=\"checkPass\">\r\n                        <el-input type=\"password\" v-model=\"form.password\" autocomplete=\"off\" size=\"small\"></el-input>\r\n                    </el-form-item>\r\n                    <!-- 来个单选框，选择用户登录的身份 -->\r\n                    <el-form-item label=\"身份：\" prop=\"checkPass\">\r\n                        <el-radio v-model=\"form.authority\" label=\"1\">管理员</el-radio>\r\n                        <el-radio v-model=\"form.authority\" label=\"2\">学生</el-radio>\r\n                        <el-radio v-model=\"form.authority\" label=\"3\">教师</el-radio>\r\n                    </el-form-item>\r\n                    <el-form-item style=\"margin-bottom: 0;\" label-width=\"0px\">\r\n                        <el-button @click=\"login()\" type=\"primary\" size=\"small\" style=\"width: 120px;\">立即登录</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { login } from '@/api/login/login.js'\r\nimport { saveUserLoginToken, saveUserInfo } from '@/utils/storage.js'\r\nexport default {\r\n    name: 'LoginView',\r\n    data() {\r\n        return {\r\n            form: {\r\n                password: '',\r\n                account: '',\r\n                authority: '',\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        async login() {\r\n            const result = await login(this.form)\r\n            console.log(result)\r\n            if (result.data.code === 1) {\r\n                await this.saveInfo(result.data.data)\r\n                this.$nextTick(()=> {\r\n                    this.$nextTick(()=>{this.$router.push('/home')})\r\n                })\r\n            } else {\r\n                this.$message({\r\n                    type: 'error',\r\n                    message: '账号或密码错误！'\r\n                })\r\n            }\r\n        },\r\n        //存储后端返回的数据\r\n        async saveInfo(data) {\r\n            saveUserLoginToken(data.token)\r\n            saveUserInfo(data)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .back {\r\n        user-select: none;\r\n        position: relative;\r\n        width: 100%;\r\n        height: 100vh;\r\n        text-align: center;\r\n        background-image: url('../../assets/352096.jpg');\r\n    }\r\n    .back > div {\r\n        position: absolute;\r\n        top: 42%;\r\n        left: 50%;\r\n        transform: translate(-50%,-50%);\r\n        width: 40%;\r\n        height: 40%;\r\n        position: fixed;\r\n    }\r\n    h1 {\r\n        color: aliceblue;\r\n        opacity: 0.8;\r\n        margin-bottom: 2%;\r\n    }\r\n    .block {\r\n        margin:0 auto;\r\n        padding: 4% 10%;\r\n        width: 70%;\r\n        background-color: rgba(255, 255, 255,0.8);\r\n        border-radius: 8px;\r\n        box-shadow: 2px 2px 4px 3px #4d4d4875;\r\n    }\r\n</style>"],"mappings":";AA4BA,SAAAA,KAAA;AACA,SAAAC,kBAAA,EAAAC,YAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,IAAA;QACAC,QAAA;QACAC,OAAA;QACAC,SAAA;MACA;IACA;EACA;EACAC,OAAA;IACA,MAAAT,MAAA;MACA,MAAAU,MAAA,SAAAV,KAAA,MAAAK,IAAA;MACAM,OAAA,CAAAC,GAAA,CAAAF,MAAA;MACA,IAAAA,MAAA,CAAAN,IAAA,CAAAS,IAAA;QACA,WAAAC,QAAA,CAAAJ,MAAA,CAAAN,IAAA,CAAAA,IAAA;QACA,KAAAW,SAAA;UACA,KAAAA,SAAA;YAAA,KAAAC,OAAA,CAAAC,IAAA;UAAA;QACA;MACA;QACA,KAAAC,QAAA;UACAC,IAAA;UACAC,OAAA;QACA;MACA;IACA;IACA;IACA,MAAAN,SAAAV,IAAA;MACAH,kBAAA,CAAAG,IAAA,CAAAiB,KAAA;MACAnB,YAAA,CAAAE,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}