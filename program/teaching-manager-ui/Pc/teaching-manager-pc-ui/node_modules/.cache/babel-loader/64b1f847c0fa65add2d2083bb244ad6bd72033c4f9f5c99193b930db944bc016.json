{"ast":null,"code":"import { exitCourse, getAllSelectedCourse } from '@/api/course/course.js';\nimport { getUserInfo } from '@/utils/storage.js';\nexport default {\n  data() {\n    return {\n      studentId: '',\n      //学生id\n      tableData: []\n    };\n  },\n  created() {\n    this.studentId = getUserInfo().id;\n    this.getAllSelectedCourse();\n  },\n  methods: {\n    //根据学生id查询选课信息\n    async getAllSelectedCourse() {\n      const result = await getAllSelectedCourse(this.studentId);\n      if (result.data.code === 1) {\n        this.tableData = result.data.data;\n      }\n    },\n    //退课\n    async exitCourse(row) {\n      const form = {\n        courseId: row.courseId,\n        studentId: this.studentId\n      };\n      const result = await exitCourse(form);\n      console.log(result);\n    },\n    //处理退课\n    handleExitCourse(row) {\n      if (row.courseStatusName === '授课中' || row.courseStatusName === '已结课') {\n        this.$message({\n          type: 'warning',\n          message: '授课中和已结课的课程不支持退课！'\n        });\n        return;\n      }\n      this.$confirm('您确定退选该门课程吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        this.exitCourse(row);\n        this.$message({\n          type: 'success',\n          message: '退课成功'\n        });\n        this.getAllSelectedCourse();\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消退课'\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["exitCourse","getAllSelectedCourse","getUserInfo","data","studentId","tableData","created","id","methods","result","code","row","form","courseId","console","log","handleExitCourse","courseStatusName","$message","type","message","$confirm","confirmButtonText","cancelButtonText","then","catch"],"sources":["src/views/manager/StudentCourse.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-table\r\n        :data=\"tableData\"\r\n        border\r\n        style=\"width: 100%\"\r\n        height=\"70vh\"\r\n        >\r\n          <el-table-column\r\n              prop=\"name\"\r\n              label=\"课程名称\"\r\n              width=\"130%\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"teacherName\"\r\n              label=\"教师\"\r\n              width=\"130%\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"credit\"\r\n              label=\"学分\"\r\n              width=\"130%\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"hour\"\r\n              label=\"学时\"\r\n              width=\"130%\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"time\"\r\n              label=\"上课时间\"\r\n              width=\"130%\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"placeName\"\r\n              label=\"上课地点\"\r\n              width=\"130%\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"courseStatusName\"\r\n              label=\"课程状态\"\r\n              width=\"130%\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"score\"\r\n              label=\"课程成绩\"\r\n              width=\"130%\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              fixed=\"right\"\r\n              label=\"操作\"\r\n              width=\"150%\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button\r\n                    size=\"mini\"\r\n                    @click=\"handleExitCourse(scope.row)\"\r\n                    type=\"warning\"\r\n                    plain>退课</el-button>\r\n                </template>\r\n          </el-table-column>\r\n      </el-table>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { exitCourse, getAllSelectedCourse } from '@/api/course/course.js'\r\nimport { getUserInfo } from '@/utils/storage.js'\r\nexport default {\r\n    data() {\r\n        return  {\r\n            studentId: '',    //学生id\r\n            tableData: []\r\n        }\r\n    },\r\n    created() {\r\n        this.studentId = getUserInfo().id\r\n        this.getAllSelectedCourse()\r\n    },\r\n    methods: {\r\n        //根据学生id查询选课信息\r\n        async getAllSelectedCourse() {\r\n            const result = await getAllSelectedCourse(this.studentId)\r\n            if (result.data.code === 1) {\r\n                this.tableData = result.data.data\r\n            }\r\n        },\r\n        //退课\r\n        async exitCourse(row) {\r\n            const form = {\r\n                courseId: row.courseId,\r\n                studentId: this.studentId\r\n            }\r\n            const result = await exitCourse(form)\r\n            console.log(result)\r\n        },\r\n\r\n        //处理退课\r\n        handleExitCourse(row) {\r\n            if (row.courseStatusName === '授课中' || row.courseStatusName === '已结课') {\r\n                this.$message({\r\n                    type: 'warning',\r\n                    message: '授课中和已结课的课程不支持退课！'\r\n                }) \r\n                return\r\n            } \r\n            this.$confirm('您确定退选该门课程吗？', '提示', {   \r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(async () => {   \r\n                this.exitCourse(row)\r\n                this.$message({\r\n                  type: 'success',\r\n                  message: '退课成功'\r\n                })\r\n                this.getAllSelectedCourse()\r\n            }).catch(() => {\r\n                this.$message({\r\n                type: 'info',\r\n                message: '已取消退课'\r\n                })   \r\n            })\r\n        }\r\n\r\n\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n\r\n<style>\r\n\r\n</style>"],"mappings":"AAkEA,SAAAA,UAAA,EAAAC,oBAAA;AACA,SAAAC,WAAA;AACA;EACAC,KAAA;IACA;MACAC,SAAA;MAAA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAF,SAAA,GAAAF,WAAA,GAAAK,EAAA;IACA,KAAAN,oBAAA;EACA;EACAO,OAAA;IACA;IACA,MAAAP,qBAAA;MACA,MAAAQ,MAAA,SAAAR,oBAAA,MAAAG,SAAA;MACA,IAAAK,MAAA,CAAAN,IAAA,CAAAO,IAAA;QACA,KAAAL,SAAA,GAAAI,MAAA,CAAAN,IAAA,CAAAA,IAAA;MACA;IACA;IACA;IACA,MAAAH,WAAAW,GAAA;MACA,MAAAC,IAAA;QACAC,QAAA,EAAAF,GAAA,CAAAE,QAAA;QACAT,SAAA,OAAAA;MACA;MACA,MAAAK,MAAA,SAAAT,UAAA,CAAAY,IAAA;MACAE,OAAA,CAAAC,GAAA,CAAAN,MAAA;IACA;IAEA;IACAO,iBAAAL,GAAA;MACA,IAAAA,GAAA,CAAAM,gBAAA,cAAAN,GAAA,CAAAM,gBAAA;QACA,KAAAC,QAAA;UACAC,IAAA;UACAC,OAAA;QACA;QACA;MACA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAJ,IAAA;MACA,GAAAK,IAAA;QACA,KAAAxB,UAAA,CAAAW,GAAA;QACA,KAAAO,QAAA;UACAC,IAAA;UACAC,OAAA;QACA;QACA,KAAAnB,oBAAA;MACA,GAAAwB,KAAA;QACA,KAAAP,QAAA;UACAC,IAAA;UACAC,OAAA;QACA;MACA;IACA;EAGA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}